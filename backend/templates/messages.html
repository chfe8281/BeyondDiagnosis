<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>UMLS Search</title>
    <link href = "{{ url_for('static', filename='css/footer.css') }}" rel = "stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    {% include "components/navbar.html" %}
    <div class = "contents">
        <h3>Messages:</h3>
        <table id = "message_table">
            {% for fm in friend_message %}
            <tr>
                {% if fm.message.is_read == false and fm.message.receiver_id == user_id %}
                    <td id = "message_user">
                        <div class = "unreadBox">
                            <span id = "unreadDot" style="margin-right: 10%;"></span>
                            <p class = "unread">{{ fm.friend.username }}</p>
                        </div>
                    </td>
                    {% else %}
                        <td id = "message_user">{{ fm.friend.username }}</td>
                {% endif %}
                {% if fm.message %}
                    <td><div class = "postBottom"><a class = "lastMessage" href = "{{ url_for('viewMessages', receiver=fm.friend.user_id) }}" >{{ fm.message.content }}</a><p id = "timestamp">{{ fm.message.time_sent.strftime('%b %d, %I:%M %p') }}</p></div></td>
                    {% else %}
                        <td><a class = "lastMessage" href = "{{ url_for('viewMessages', receiver=fm.friend.user_id) }}">Start the conversation ...</a></td>
                {% endif %}
            </tr>
                {% endfor %}
        </table>
    </div>
    {% include "components/footer.html" %}
</body>
</html>